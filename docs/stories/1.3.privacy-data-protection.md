# Story 1.3: Privacy & Data Protection

## Status
Draft

## Story

**As a** Corona-Warn-App user,
**I want** complete control over my privacy with transparent, decentralized data handling,
**so that** I can trust the app with my health data while maintaining my anonymity and personal privacy.

## Acceptance Criteria

1. **Decentralized Data Architecture**
   - All encounter data stored exclusively on user's device (no server-side storage)
   - Risk assessment computed locally on device only
   - No personal identifiable information (PII) collected or transmitted
   - No location data, IP addresses, or device identifiers stored or transmitted

2. **Anonymous Identity System**
   - App uses rotating pseudonymous identifiers (changes every 10-20 minutes)
   - Identifiers are cryptographically random and cannot be traced to individuals
   - No permanent user accounts, registrations, or login required
   - No correlation possible between multiple sessions or app reinstalls

3. **User Consent & Control**
   - Explicit user consent required for each data processing activity
   - Users can disable exposure notifications at any time (OS level + app level)
   - Users can delete all app data with single action
   - Clear explanation of what data is processed and how

4. **Data Minimization & Retention**
   - Only epidemiologically necessary data is processed
   - Automatic deletion of encounter data after 14 days
   - No data analytics, usage tracking, or behavioral monitoring
   - Minimal app permissions (only Bluetooth and notifications)

5. **Transparency & Open Source**
   - Complete source code available for public review
   - Privacy-by-design architecture independently auditable
   - Clear privacy policy in simple German language
   - Regular privacy compliance audits by external parties

## Tasks / Subtasks

- [ ] **Decentralized Architecture Implementation** (AC: 1)
  - [ ] Design local-only data storage architecture
  - [ ] Implement client-side risk calculation engine
  - [ ] Ensure no PII collection or transmission
  - [ ] Remove all location and tracking capabilities

- [ ] **Anonymous Identity & Cryptography** (AC: 2)
  - [ ] Implement cryptographically secure pseudonymous ID generation
  - [ ] Create ID rotation mechanism (10-20 minute intervals)
  - [ ] Ensure no correlation between old and new IDs
  - [ ] Implement secure key exchange for exposure notifications

- [ ] **User Consent & Control Interface** (AC: 3)
  - [ ] Design granular consent management UI
  - [ ] Implement app-level exposure notification toggle
  - [ ] Create comprehensive data deletion functionality
  - [ ] Build clear privacy explanation screens

- [ ] **Data Governance & Retention** (AC: 4)
  - [ ] Implement automatic 14-day data expiration
  - [ ] Design minimal permission request strategy
  - [ ] Remove all analytics and tracking code
  - [ ] Create data audit logging (privacy-compliant)

- [ ] **Transparency & Compliance** (AC: 5)
  - [ ] Prepare source code for public release
  - [ ] Create comprehensive privacy policy (German)
  - [ ] Implement privacy compliance monitoring
  - [ ] Design external audit integration points

## Dev Notes

### Privacy-by-Design Architecture
- **Core Principle:** Decentralized approach - user device is the only trusted party
- **Data Flow:** Device ↔ Anonymous Keys ↔ Backend (no personal data)
- **Cryptography:** Apple/Google Exposure Notification API cryptographic protocols
- **Storage:** Local SQLite/Core Data with encryption at rest

### GDPR/DSGVO Compliance Requirements
- **Legal Basis:** User consent + public health interest (Art. 6(1)(a) + Art. 9(2)(i))
- **Data Subject Rights:** Access, rectification, erasure, portability (implemented via local control)
- **Privacy by Design:** Article 25 compliance with technical and organizational measures
- **Data Protection Impact Assessment (DPIA):** Required for health data processing

### Apple/Google API Privacy Constraints
- API enforces privacy constraints (cannot be bypassed)
- No location data access through Exposure Notification API
- Automatic key rotation enforced by OS
- User can disable at OS level (cannot be overridden by app)

### German Health Data Protection (SGB V)
- Special category personal data under GDPR Article 9
- Enhanced security and consent requirements
- Integration with German healthcare system privacy standards
- Compliance with Patientendaten-Schutz-Gesetz (PDSG)

### Open Source Strategy
- **Repository:** Public GitHub repository for complete transparency
- **License:** Apache 2.0 or similar permissive license
- **Code Review:** Public security and privacy review process
- **Documentation:** Complete privacy architecture documentation

## Testing

### Testing Standards
- **Privacy Tests:** Automated verification of no PII transmission
- **Security Tests:** Cryptographic implementation validation
- **Compliance Tests:** GDPR/DSGVO requirement verification
- **Audit Tests:** External privacy audit integration points

### Test File Location
- iOS: `CWATests/PrivacyComplianceTests.swift`
- Android: `app/src/test/java/de/rki/coronawarnapp/privacy/`

### Specific Testing Requirements
- **Data Flow Analysis:** Verify no personal data leaves device
- **Anonymity Testing:** Confirm pseudonymous IDs cannot be correlated
- **Consent Testing:** Validate all data processing has explicit consent
- **Deletion Testing:** Verify complete data deletion functionality
- **Audit Logging:** Test privacy compliance monitoring systems

### Privacy Audit Requirements
- **External Audit:** Independent privacy assessment by certified auditors
- **Penetration Testing:** Security assessment of privacy controls
- **Code Review:** Third-party review of privacy implementation
- **Compliance Verification:** Legal review of GDPR/DSGVO compliance

### Privacy Testing Tools
- **Static Analysis:** Code scanning for privacy violations
- **Network Monitoring:** Verify no unauthorized data transmission
- **Device Analysis:** Confirm no data persistence beyond retention period
- **User Journey Testing:** Privacy consent flow validation

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|---------|
| 2025-10-08 | 1.0 | Initial story creation from Epic 1 | Sarah (PM) |